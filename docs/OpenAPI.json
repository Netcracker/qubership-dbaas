{
  "openapi": "3.0.3",
  "info": {
    "title": "DBaaS Aggregator API",
    "description": "This documentation presents REST API for \"Database as a Service\" component. DBaaS is aggregator for all adapters. DBaaS is purposed to aggregate the requests for the administrated databases and send to the necessary adapter. DBaaS stores information about all databases used in cloud project. These databases are isolated by namespace. DBaaS uses Classifier for identification a database within one cloud namespace. Classifier indicates service information, such as scope, microserviceName, tenantId, namespace.",
    "version": "6.1.0"
  },
  "tags": [
    {
      "name": "API version controller",
      "description": "Providing API version info"
    },
    {
      "name": "Backups administration",
      "description": "Allows to get list of available backups, trigger backup collector and restore some specific backup. All backup management is per namespace."
    },
    {
      "name": "Balancing Rules Administration V3",
      "description": "Allows to configure a logic of balancing logical databases over physical. "
    },
    {
      "name": "Controller Database administration",
      "description": "Allows to create, access and drop databases. This API uses classifier as a key to create and retrieve databases. Classifier is an abstract key that could be any JSON object mapping to (String -\u003e Object) map. For example classifier could be \u0026#123;   \"tenantId\": \"uuid\",   \"namespace\": \"cloud-catalog-ci\",   \"microserviceName\": \"product-catalog-manager\"\u0026#125;"
    },
    {
      "name": "Controller for debug operations"
    },
    {
      "name": "Controller for internal operations"
    },
    {
      "name": "Database operation controller v3",
      "description": "This controller contains API for operations with already created databases, users."
    },
    {
      "name": "Database users controller v3",
      "description": "This controller contains API for operations with database users."
    },
    {
      "name": "Global Database Operation Controller v3",
      "description": "This controller provides APIs for performing operations on existing databases and users without requiring a specific namespace in the endpoints."
    },
    {
      "name": "Microservice controller v3",
      "description": "This controller contains APIs based on microservice value."
    },
    {
      "name": "Migration controller",
      "description": "Provides API to migrate: database registration from another source, database passwords to external system."
    },
    {
      "name": "Physical databases registration controller",
      "description": "Provides API to register new physical databases"
    }
  ],
  "paths": {
    "/api-version": {
      "get": {
        "tags": [
          "API version controller"
        ],
        "responses": {
          "200": {
            "description": "Current APi version and supported API versions"
          }
        }
      }
    },
    "/api/bluegreen/v1/operation/commit": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Commit Bg Domain",
        "description": "Group namespaces into on Blue-green domain",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgStateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Commit operation successfully done"
          },
          "400": {
            "description": "Incorrect request"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/destroy-domain": {
      "delete": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Delete bg Domains",
        "description": "destroy registered bg domain",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgNamespaceRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Blue-green domain successfully destroyed"
          },
          "400": {
            "description": "Incorrect request"
          },
          "404": {
            "description": "Bg domain not found"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/get-domains": {
      "get": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Get All bg Domains",
        "description": "get all registered bg domains",
        "responses": {
          "200": {
            "description": "Get registered bg domains"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/get-domains/{namespace}": {
      "get": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Get All bg Domains",
        "description": "get all registered bg domains",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "registered bg domains"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/init-domain": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Init Bg Domain",
        "description": "Group namespaces into on Blue-green domain",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgStateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Blue-green domain successfully registered"
          },
          "400": {
            "description": "Incorrect request"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/list-domains": {
      "get": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "List all BG domains",
        "description": "list all registered BG domains",
        "responses": {
          "200": {
            "description": "List of registered BG domains"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/orphans": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Get list of orphan databases",
        "description": "List of databases with orphan state related to requested namespaces",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "List of databases"
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal processing error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Cleanup orphan databases",
        "description": "Housekeeping operation which drops all databases with ORPHAN state.WARNING! If delete\u003dtrue this operation will drop databases even when DBaaS is in PROD mode",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteOrphansRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Orphan databases successfully dropped"
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal processing error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/promote": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Promote",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgStateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Promote is already done"
          },
          "400": {
            "description": "Incorrect request"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/rollback": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "rollback",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgStateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rollback is already done"
          },
          "400": {
            "description": "Incorrect request"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/warmup": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Warmup namespace",
        "description": "The API prepare databases in namespace to work in versioning mode. If database is versioned then will be create full copy.If database is static will be create only new classifier",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BgStateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Warmup is already done"
          },
          "202": {
            "description": "Warmup process has started, return trackingId "
          },
          "400": {
            "description": "Incorrect request"
          },
          "409": {
            "description": "Invalid request body"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/{trackingId}/status": {
      "get": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Operation status",
        "description": "Get operation status by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "return operation status"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/bluegreen/v1/operation/{trackingId}/terminate": {
      "post": {
        "tags": [
          "Blue Green Controller V 1"
        ],
        "summary": "Terminate operation",
        "description": "Terminate operation by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Terminate operation and return status"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/composite/v1/structures": {
      "get": {
        "tags": [
          "Composite Controller"
        ],
        "summary": "Get all composite structures",
        "description": "Retrieve all composite structures that are registered in DbaaS.",
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "500": {
            "description": "Internal server error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "post": {
        "tags": [
          "Composite Controller"
        ],
        "summary": "Save or update composite",
        "description": "Create a new composite structure or update an existing one.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompositeStructureDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Composite is saved"
          },
          "400": {
            "description": "Validation error"
          },
          "409": {
            "description": "Conflict error. Namespace in request body is already associated with another composite structure"
          },
          "500": {
            "description": "Internal server error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/composite/v1/structures/{compositeId}": {
      "get": {
        "tags": [
          "Composite Controller"
        ],
        "summary": "Get composite structure by composite id",
        "description": "Retrieve a composite structure by its Id. Composite id by design is baseline or baseline origin if namespace in blue-green",
        "parameters": [
          {
            "name": "compositeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Composite is found"
          },
          "404": {
            "description": "Composite not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/composite/v1/structures/{compositeId}/delete": {
      "delete": {
        "tags": [
          "Composite Controller"
        ],
        "summary": "Delete composite by composite id",
        "description": "Delete a composite structure by its ID.",
        "parameters": [
          {
            "name": "compositeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Composite is deleted successfully"
          },
          "404": {
            "description": "Composite not found"
          },
          "500": {
            "description": "Internal server error"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/dbaas/declarative/namespaces/{namespace}/service/{serviceName}": {
      "post": {
        "tags": [
          "Declarative Controller"
        ],
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serviceName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "text/plain": {
              "schema": {
                "type": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "deprecated": true,
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/dbaas/declarative/status/{trackingId}": {
      "get": {
        "tags": [
          "Declarative Controller"
        ],
        "summary": "Operation status",
        "description": "Get operation status by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Return operation status"
          },
          "404": {
            "description": "Not found operation status"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "deprecated": true,
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/declarations/v1/apply": {
      "post": {
        "tags": [
          "Config Controller V 1"
        ],
        "summary": "Apply config",
        "description": "Apply declarative config",
        "requestBody": {
          "content": {
            "text/plain": {
              "schema": {
                "type": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeclarativeResponse"
                }
              }
            }
          },
          "202": {
            "description": "Asynchronous execution started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeclarativeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/declarations/v1/operation/{trackingId}/extendedTroubleshootingInfo": {
      "get": {
        "tags": [
          "Config Controller V 1"
        ],
        "summary": "Operation status",
        "description": "Get operation status by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Return operation status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperationStatusExtendedResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found operation status"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/declarations/v1/operation/{trackingId}/status": {
      "get": {
        "tags": [
          "Config Controller V 1"
        ],
        "summary": "Operation status",
        "description": "Get operation status by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Return operation status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeclarativeResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found operation status"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/declarations/v1/operation/{trackingId}/terminate": {
      "post": {
        "tags": [
          "Config Controller V 1"
        ],
        "summary": "Terminate operation",
        "description": "Terminate operation by trackingId",
        "parameters": [
          {
            "name": "trackingId",
            "in": "path",
            "description": "Id to track operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Operation completed successfully"
          },
          "404": {
            "description": "Incorrect trackingID"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/backups/{backupId}/restorations/{restorationId}": {
      "get": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Get restoration info",
        "description": "Returns restoration info",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "restorationId",
            "in": "path",
            "description": "Identifier of restore process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Selected backup or restoration not found"
          },
          "200": {
            "description": "Backup validated and can be restored",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NamespaceBackup"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/backups/{backupId}/{parameter}": {
      "post": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Restore database",
        "description": "Restores backup for specific only backup id",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "targetNamespace",
            "in": "query",
            "description": "This parameter specifies namespace for restoring to another project. This parameter is needed to use if backup and restore projects are different.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "202": {
            "description": "Namespace restoration started, return backup id to track status"
          },
          "400": {
            "description": "Selected backup cannot be restored"
          },
          "404": {
            "description": "Selected backup not found"
          },
          "200": {
            "description": "Backup successfully restored"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/balancing/rules/permanent": {
      "get": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. Get permanent namespace balancing rule",
        "description": "Get list of applied permanent balancing rules.",
        "parameters": [
          {
            "name": "namespace",
            "in": "query",
            "description": "Namespace for which the rules will be searched",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Rules not found"
          },
          "200": {
            "description": "Return founded rules"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "put": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. Add permanent namespace balancing rule",
        "description": "Allows adding new permanent namespace balancing rule. Balancing rules are intended to define in which physical database new logical database should be created. This API allows add such rule for a namespace: it means that all logical databases for microservices in this namespace will be placed in specific physical database according to rule. Such rule is permanent and it won\u0027t be deleted during physical database deletion. \n + *WARNING! Rules can be overridden. Rule\u0027s integrity and validity is the responsibility of project(applies) side.* \n It means that rule doesn\u0027t merge and there can be only one version of rule. If you change configuration of previous rule and send it, then logical databases will be created by the new changed rule. Therefore, be careful before deleting or modifying the rule.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/PermanentPerNamespaceRuleDTO"
                }
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Cannot create two different rules for same namespace with different physicalDbId and same DbType"
          },
          "200": {
            "description": "New rules created"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. Delete permanent namespace balancing rule",
        "description": "Delete all permanent balancing rules on namespace. ",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/PermanentPerNamespaceRuleDeleteDTO"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rules deleted"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/databases/find-by-name/{dbname}": {
      "get": {
        "tags": [
          "Aggregated Database Administration No Namespace Controller V 3"
        ],
        "summary": "V3. Get database by name",
        "description": "Returns list of databases for the specific logical database name",
        "parameters": [
          {
            "name": "dbname",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "namespace",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "withDecryptedPassword",
            "in": "query",
            "schema": {
              "default": "false",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "List of databases with the specific logical database name",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DatabaseResponseV3ListCP"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/databases/update-host": {
      "post": {
        "tags": [
          "Global Database Operation Controller v3"
        ],
        "summary": "V3. Update Physical Host in Connection Properties",
        "description": "This API updates the physical database host in the connection properties of logical databases. In the request body, you can specify whether to create a copy of the registry record (default behavior) or to make changes in place. If changes are made in place, the original database record will be updated.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UpdateHostRequest"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The host have been updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DatabaseResponseV3ListCP"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/debug/internal/databases": {
      "get": {
        "tags": [
          "Controller for debug operations"
        ],
        "summary": "V3. Debug Get Logical Databases",
        "description": "Retrieves Logical Database instances in near-tabular form.\nOperation supports filters in \u0027filter\u0027 query parameter in style of RESTful Service Query Language (RSQL).",
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "description": "This parameter specifies custom RESTful Service Query Language (RSQL) query to apply filtering.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "500": {
            "description": "An error occurred during getting response"
          },
          "400": {
            "description": "Incorrect RSQL query in \u0027filter\u0027 query parameter"
          },
          "200": {
            "description": "Successfully retrieved list of debug logical databases",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DebugLogicalDatabaseV3"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/debug/internal/dump": {
      "get": {
        "tags": [
          "Controller for debug operations"
        ],
        "summary": "V3. Get Dump",
        "description": "Retrieves a dump of DbaaS database information, including logical databases, physical databases, declarative configurations, BG domains and balancing rules.\nBy default, response body is returned as compressed zip file with json file inside.\nHowever, it is possible to get response body in JSON format instead of file.",
        "responses": {
          "500": {
            "description": "An error occurred during getting dump"
          },
          "200": {
            "description": "Successfully retrieved dump",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DumpResponseV3"
                }
              },
              "application/octet-stream": {
                "schema": {
                  "$ref": "#/components/schemas/DumpResponseV3"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/debug/internal/ghost": {
      "get": {
        "tags": [
          "Controller for debug operations"
        ],
        "summary": "V3. Get ghost databases",
        "description": "Returns list of ghost databases (databases that exists in adapter, but not registered in DBaaS)",
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "List of ghost databases",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GhostDatabasesResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/debug/internal/info": {
      "get": {
        "tags": [
          "Controller for debug operations"
        ],
        "summary": "V3. Get overall status",
        "description": "Get DBaaS overall status",
        "responses": {
          "500": {
            "description": "An error occurred during getting overall status"
          },
          "200": {
            "description": "Successfully retrieved status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OverallStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/debug/internal/lost": {
      "get": {
        "tags": [
          "Controller for debug operations"
        ],
        "summary": "V3. Get lost databases",
        "description": "Returns list of lost databases (databases that registered in DBaaS, but not exists in adapter)",
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "List of lost databases",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DatabaseResponseV3ListCP"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/migration/databases": {
      "put": {
        "tags": [
          "Migration controller"
        ],
        "summary": "V3. Register databases",
        "description": "This API allows you to register the database in DBaaS. The registered database would not be created, and it is assumed that it already exists in the cluster The purpose for this API is to register databases which weren not created through DBaaS. If registered database already exist in DBaaS then it will not be added.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/RegisterDatabaseRequestV3"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Migration completed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Internal error during migration",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/migration/databases/with-user-creation": {
      "put": {
        "tags": [
          "Migration controller"
        ],
        "summary": "V3. Register databases with user creation",
        "description": "This API allows you to register the database in DBaaS with user creation. It can be useful when username and password is unknown and you want you database to dbaas registry. Previous users will not be unbind, so in point of security you should unbind user them by yourself.The registered database would not be created, and it is assumed that it already exists in the cluster The purpose for this API is to register databases which were not created through DBaaS. If registered database already exist in DBaaS then it will not be added.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/RegisterDatabaseWithUserCreationRequest"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Migration completed. Response is a map where key is database type and value is MigrationResult",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MigrationResult"
                }
              }
            }
          },
          "409": {
            "description": "There are some conflicts detected during migration. Response is a map where key is database type and value is MigrationResult",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MigrationResult"
                }
              }
            }
          },
          "500": {
            "description": "Internal error during migration. Response is a map where key is database type and value is MigrationResult",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MigrationResult"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/databases/link": {
      "post": {
        "tags": [
          "Database operation controller v3"
        ],
        "summary": "V3. Link databases for the requested microservices to target namespace",
        "description": "Create additional classifiers for required databases in the target namespace, if there is no such classifiers.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases are used",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LinkDatabasesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "All databases for requested microservices were linked to target namespace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DatabaseResponseV3ListCP"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Request does not pass validation. Maybe some required fields are empty",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Some error during databases linking",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/databases/recreate": {
      "post": {
        "tags": [
          "Database operation controller v3"
        ],
        "summary": "V3. Recreate database with existing classifier. Prohibited for Blue-Green",
        "description": "Recreate existing database with same classifier in the same physicalDb or in another. The API can be useful if you want to migrate associated with microservice logical db to another physical database. So, DbaaS creates a new empty database. After it, you will get a new connection and can perform a migration.Pay attention, each request will produce a new database even if the database was previously recreated. So, if your response contains unsuccessful databases you must leave only these databases in the request. Otherwise successful databases will be recreated again. The previous database is not deleted but is marked as archived.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "namespace where microservices live that associated with these databases",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/RecreateDatabaseRequest"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "All requested databases were recreated. There are no unsuccessful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecreateDatabaseResponse"
                }
              }
            }
          },
          "500": {
            "description": "Some requested databases were not recreated. There are unsuccessful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecreateDatabaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "Request does not pass validation. Maybe passed physical databases id is unregistered or logical database with requested classifier has not been created before.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/databases/update-classifier/{type}": {
      "put": {
        "tags": [
          "Database operation controller v3"
        ],
        "summary": "V3. Update existing database classifier",
        "description": "The API allows to update existing database classifier",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases are used",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "Type of physical database where database was created, e.g. mongodb, postgresql",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateClassifierRequestV3"
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "\"from\" or \"to\" classifiers must not be empty",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "406": {
            "description": "\"from\" or \"to\" classifiers contain namespace different from in the path",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "409": {
            "description": "There is a database with provided \"to\" classifier or ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "There is no database with provided \"from\" classifier",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "200": {
            "description": "Database classifier was updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/databases/update-connection/{type}": {
      "put": {
        "tags": [
          "Database operation controller v3"
        ],
        "summary": "V3. Update existing database connection properties",
        "description": "The API allows to update existing database connection properties",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases are used",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "Type of physical database where database was created, e.g. mongodb, postgresql",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateConnectionPropertiesRequest"
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "classifier contains namespace different from namespace in the path",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Database with classifier does not contain connection properties for role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "200": {
            "description": "Database connection properties were updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/password-changes": {
      "post": {
        "tags": [
          "Database operation controller v3"
        ],
        "summary": "V3. Change user password",
        "description": "The API changes password of a user that is related to the specified database. A password will be changed to a random value.If classifier is not passed then all passwords of databases in the namespace and type will be changed.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases are used",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChangeRequestV3"
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "200": {
            "description": "The passwords have been changed successfully. If errors will occur during the password changes, then the errors are aggregated and returned with maximum error status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PasswordChangeResponse"
                }
              }
            }
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/namespaces/{namespace}/services/{serviceName}/access-grants": {
      "get": {
        "tags": [
          "Microservice controller v3"
        ],
        "summary": "V3. Get actual access grants for microservice databases",
        "description": "The API allows to get actual access grants of microservice databases.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases are used",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serviceName",
            "in": "path",
            "description": "Microservice name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Access grants was successfully found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccessGrantsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Access grants for service\u0027s databases was not founded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/users": {
      "put": {
        "tags": [
          "Database users controller v3"
        ],
        "summary": "V3. Get or create user",
        "description": "The API allows to get or create specific user for database.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetOrCreateUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User is already created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetOrCreateUserResponse"
                }
              }
            }
          },
          "201": {
            "description": "New user is created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetOrCreateUserResponse"
                }
              }
            }
          },
          "202": {
            "description": "Operation in progress",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Database users controller v3"
        ],
        "summary": "V3. Delete user",
        "description": "The API allows to delete specific user for database.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserOperationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User is successfully deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "204": {
            "description": "User is not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/users/restore": {
      "post": {
        "tags": [
          "Database users controller v3"
        ],
        "summary": "V3. Restore users",
        "description": "The API allows to restore users for database. If role field is passed, then only users with this role will be processed.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RestoreUsersRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Users recreated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessfulRestoreUsersResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error during restore",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RestoreUsersResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/users/rotate-password": {
      "post": {
        "tags": [
          "Database users controller v3"
        ],
        "summary": "V3. Rotate user password.",
        "description": "The API allows to rotate password for specific user.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserOperationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password was successfully reset.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups": {
      "get": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Get all backups of namespace",
        "description": "Lists all backups prepared for specified namespace",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully returned backups."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups/collect": {
      "post": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Backup namespace",
        "description": "Start backup collection process for specified namespace",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace of the database needs to be saved",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "allowEviction",
            "in": "query",
            "description": "Allows to disable eviction on adapters for current backup",
            "schema": {
              "default": "true",
              "type": "boolean"
            }
          },
          {
            "name": "ignoreNotBackupableDatabases",
            "in": "query",
            "description": "The parameter enables(by default)/disables validating of DBaaS adapters on the supported backup procedure",
            "schema": {
              "default": "false",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "202": {
            "description": "Backup of namespace databases started, return backup id to track status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UUID"
                }
              }
            }
          },
          "201": {
            "description": "Backup successfully collected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NamespaceBackup"
                }
              }
            }
          },
          "501": {
            "description": "Some backup adapters do not support backup operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups/{backupId}": {
      "get": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Get backup info",
        "description": "Returns backup info",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where backup was made",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Selected backup not found"
          },
          "200": {
            "description": "Backup info was successfully collected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NamespaceBackup"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "put": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Add new backup info",
        "description": "Adds new backup info to specified backup id",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace of databases in backup time",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NamespaceBackupDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Information was added successfully"
          },
          "403": {
            "description": "Backup namespace and specified namespace are different"
          },
          "401": {
            "description": "Not Authorized"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Delete backup",
        "description": "Start delete backup process for specified namespace",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup needs to be deleted ",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace of the database backup",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Backup successfully deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NamespaceBackupDeletion"
                }
              }
            }
          },
          "403": {
            "description": "Backup deletion is forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Backup is not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "The following backup can not be deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups/{backupId}/restorations/{restorationId}": {
      "get": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Get restoration info",
        "description": "Returns restoration info",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where backup was made",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "restorationId",
            "in": "path",
            "description": "Identifier of restore process",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "Selected backup or restoration not found"
          },
          "200": {
            "description": "Restoration info was successfully collected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NamespaceBackup"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups/{backupId}/validate": {
      "get": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Validate backup",
        "description": "Validates backup of the specified namespace",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Identifier of backup",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where backup was made",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "500": {
            "description": "Selected backup cannot be restored, probably it had been removed or failed to be collected"
          },
          "404": {
            "description": "Selected backup not found"
          },
          "200": {
            "description": "Backup is validated and can be restored"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/backups/{backupId}/{parameter}": {
      "post": {
        "tags": [
          "Backups administration"
        ],
        "summary": "V3. Restore namespace",
        "description": "Restores database within the initial namespace which was used during backup or to another namespace",
        "parameters": [
          {
            "name": "backupId",
            "in": "path",
            "description": "Backup identifier",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/UUID"
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "description": "This parameter specifies namespace where backup was made",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "targetNamespace",
            "in": "query",
            "description": "This parameter specifies namespace for restoring to another project. This parameter is needed if backup and restore projects are different.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "202": {
            "description": "Namespace restoration started, return backup id to track status"
          },
          "400": {
            "description": "Selected backup cannot be restored"
          },
          "404": {
            "description": "Selected backup not found"
          },
          "200": {
            "description": "Backup successfully restored"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases": {
      "put": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": "V3. Creates new database V3",
        "description": "Creates new database and returns it with connection information, or returns the already created database if it exists. This version differs from version v1 in that there is the additional require field \"dbOwner\", which should contain name of database owner. It can be for exammple microserviceName value.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where database will be placed",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "async",
            "in": "query",
            "description": "Determines if database should be created asynchronously",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseCreateRequestV3"
              }
            }
          }
        },
        "responses": {
          "403": {
            "description": "You cannot access databases in this namespace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "There is no appropriate adapter for the specified database type",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "201": {
            "description": "Database created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "200": {
            "description": "Already having such database",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "202": {
            "description": "Database is in process of creation"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases/get-by-classifier/{type}": {
      "post": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": "V3. Get database by classifier",
        "description": "Returns connection to an already created database using classifier to search",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "The type of base in which the database was created. For example PostgreSQL  or MongoDB",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClassifierWithRolesRequest"
              }
            }
          }
        },
        "responses": {
          "404": {
            "description": "Cannot find database with such classifier",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "200": {
            "description": "Successfully found database",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Database"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases/list": {
      "get": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": "V3. List of all databases",
        "description": "Returns the list of all databases.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the databases is used",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "withResources",
            "in": "query",
            "description": "Parameter for adding database resources to response",
            "required": true,
            "schema": {
              "default": "false",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "List of databases in namespace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases/registration/externally_manageable": {
      "put": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": "V3. External database registration",
        "description": "This API supports registration in DbaaS for any external logical database.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace with which new database will be connected",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExternalDatabaseRequestV3"
              }
            }
          }
        },
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "Successfully found database",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "201": {
            "description": "The database was added or updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "409": {
            "description": "Logical database with such classifier and type already exist in namespace and it is internal logical database",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "403": {
            "description": "Namespace in classifier and path variable are not equal",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases/statuses": {
      "get": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": "V3. Deprecated. Get list of ghosts and lost databases",
        "description": "Databases may get lost if they were marked to delete but were not actually deleted. An existing database stays as a ghost if it was not registered in DBaaS.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace for which to get the database statuses",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "500": {
            "description": "Internal error"
          },
          "200": {
            "description": "List of ghosts and lost databases",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabasesInfo"
                }
              }
            }
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "deprecated": true,
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/databases/{type}": {
      "delete": {
        "tags": [
          "Controller Database administration"
        ],
        "summary": " V3.Delete database by classifier",
        "description": "Deletes database by id in the specific namespace.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Project namespace in which the base is used",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "The physical type of logical database. For example mongodb or postgresql",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClassifierWithRolesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully deleted database.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Requested role is not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Cannot find database with such classifier",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "403": {
            "description": "You cannot access databases in this namespace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "406": {
            "description": "Dbaas is working in PROD mode. Deleting logical databases is prohibited",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/physical_databases/balancing/rules/{ruleName}": {
      "put": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. On namespace physDb balancing rule",
        "description": "There are no changes in comparison with version 1. Auto balancing rules allows configure behavior of DbaaS when a physical database of some specific type is choosen for new logical database. This rule currently works for new databases only, no migration of logical databases between physical databases is supported yet.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where the rule will be placed, each rule must have a namespace. Rules works only on logical databases created in the same namespace where they have been created.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "ruleName",
            "in": "path",
            "description": "Name of the rule used as an identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RuleRegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "409": {
            "description": "Cannot create two different rules for same type with same order"
          },
          "201": {
            "description": "New rule created"
          },
          "200": {
            "description": "Existing rule changed"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/physical_databases/rules/debug": {
      "post": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "Debug for microservices\u0027 balancing rules.",
        "description": "This API receives JSON-configs with rules and list of microservices to check and returns in response a mapping what physical database is going to be assigned to each microservice from the request based on the balancing rules from the request and the existing rules in DBaaS. Response will also contain a list of labels for the assigned physical database to help analyze which rule was applied.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where the rule is expected to be placed, each rule must have a namespace. Rules works only on logical databases created in the same namespace where they have been created.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DebugRulesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Return result of rules evaluation"
          },
          "500": {
            "description": "Error happened when processing rules"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/physical_databases/rules/onMicroservices": {
      "get": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. Get on microservice physical database balancing rules.",
        "description": "Allows getting physical database balancing rules for microservices.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where the rule is placed, each rule has a namespace.\nRules works only on logical databases created in the same namespace where they have been created.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Gotten on microservice physical database balancing rules"
          },
          "500": {
            "description": "Unknown error which may be related with internal work of DbaaS."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "put": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "V3. On microservice physDb balancing rule.",
        "description": "Allows adding balancing rules for microservices.  Balancing rules are intended to define in which physical database new logical database should be created. This API allows adding such rules for each microservice, or for group of microservices separately. \n *WARNING! Rules can be overridden. Rule\u0027s integrity and validity is the responsibility of project(applies) side.* \n It means that rule doesn\u0027t merge and there can be only one version of rule. If you change configuration of previous rule and send it, then logical databases will be created by the new changed rule. Therefore, be careful before deleting or modifying the rule.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where the rule will be placed, each rule must have a namespace. Rules works only on logical databases created in the same namespace where they have been created.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/OnMicroserviceRuleRequest"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "New rule created"
          },
          "400": {
            "description": "Received request with wrong body"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{namespace}/physical_databases/rules/onMicroservices/validation": {
      "put": {
        "tags": [
          "Balancing Rules Administration V3"
        ],
        "summary": "Validation for microservices\u0027 balancing rules.",
        "description": "This API receives JSON-configs with rules for microservices and returns in response mapping label to physical db (whether all mentioned lables exist), indicates errors if any. Response also contains information about default physical databases for each db type.",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "description": "Namespace where the rule is expected to be placed, each rule must have a namespace. Rules works only on logical databases created in the same namespace where they have been created.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/OnMicroserviceRuleRequest"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Schema is valid"
          },
          "400": {
            "description": "Schema is not valid"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{type}/physical_databases": {
      "get": {
        "tags": [
          "Physical databases registration controller"
        ],
        "summary": "V3. List registered physical databases",
        "description": "Returns the list of registered physical databases by database type",
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "description": "Type of database, for example: MongoDB, PostgreSQL, elasticsearch, etc. or all - to list all registered physical databases",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Registered physical databases by specific type were found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisteredPhysicalDatabasesDTO"
                }
              }
            }
          },
          "404": {
            "description": "Registered physical databases by specific type were not found."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{type}/physical_databases/{phydbid}": {
      "put": {
        "tags": [
          "Physical databases registration controller"
        ],
        "summary": "V3. Register new physical database",
        "description": "Creates new physical database and returns path to it with physical database identifier.",
        "parameters": [
          {
            "name": "phydbid",
            "in": "path",
            "description": "Physical database identifier. The value belongs to the specific database cluster",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "Type of database. Example: MongoDB, PostgreSQL, elasticsearch, etc.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PhysicalDatabaseRegistryRequestV3"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Database created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "200": {
            "description": "Updated existing database",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "202": {
            "description": "Adapter should continue to create roles for new portions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "409": {
            "description": "Database could not be registered as physical database already exists with another adapter id or the same adapter already exists and it is used with other physical database"
          },
          "502": {
            "description": "Adapter is not available during handshake process"
          },
          "400": {
            "description": "Adapter already running"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Physical databases registration controller"
        ],
        "summary": "V3. Delete physical database",
        "description": "Deletes physical database by database type and physical database id",
        "parameters": [
          {
            "name": "phydbid",
            "in": "path",
            "description": "Physical database identifier. The value belongs to the specific database cluster",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "Type of database, for example: MongoDB, PostgreSQL, elasticsearch, etc.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully deleted physical databases."
          },
          "406": {
            "description": "Database is marked as default or there are connected logical databases."
          },
          "404": {
            "description": "Physical database with specific type and id was not found."
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    },
    "/api/v3/dbaas/{type}/physical_databases/{phydbid}/global": {
      "put": {
        "tags": [
          "Physical databases registration controller"
        ],
        "summary": "V3. Change default physical database",
        "description": "Moves the \u0027global\u0027 flag to the specified existing physical database",
        "parameters": [
          {
            "name": "phydbid",
            "in": "path",
            "description": "Physical database identifier. The value belongs to the specific database cluster",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "path",
            "description": "Type of database. Example: MongoDB, PostgreSQL, elasticsearch, etc.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated existing physical database"
          },
          "404": {
            "description": "Specified physical database does not registered"
          },
          "401": {
            "description": "Not Authorized"
          },
          "403": {
            "description": "Not Allowed"
          }
        },
        "security": [
          {
            "SecurityScheme": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AccessGrantsResponse": {
        "type": "object",
        "properties": {
          "services": {
            "description": "Lists services roles",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ServiceRole"
            }
          },
          "policies": {
            "description": "Lists polices roles",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PolicyRole"
            }
          },
          "disableGlobalPermissions": {
            "description": "Is global permissions disabled",
            "type": "boolean"
          }
        }
      },
      "AdapterDatabaseCreateRequest": {
        "description": "The request to create database for REST dbaas adapter",
        "type": "object",
        "properties": {
          "metadata": {
            "type": "object",
            "additionalProperties": {}
          },
          "namePrefix": {
            "type": "string"
          },
          "settings": {
            "type": "object",
            "additionalProperties": {}
          },
          "initScriptIdentifiers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "deprecated": true
          },
          "password": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "dbName": {
            "type": "string"
          }
        }
      },
      "AdditionalRoles": {
        "description": "V3 Additional roles model for sending registration to DBaaS",
        "required": [
          "id",
          "dbName",
          "connectionProperties",
          "resources"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "Logical database Id",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "dbName": {
            "description": "Logical database name",
            "type": "string"
          },
          "connectionProperties": {
            "description": "Logical databases connection properties",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "resources": {
            "description": "Logical databases resources",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbResource"
            }
          }
        }
      },
      "ApiVersion": {
        "type": "object",
        "properties": {
          "specs": {
            "description": "The root URL part for that API version",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Spec"
            }
          }
        }
      },
      "BGState": {
        "type": "object",
        "properties": {
          "controllerNamespace": {
            "type": "string"
          },
          "originNamespace": {
            "$ref": "#/components/schemas/BGStateNamespace"
          },
          "peerNamespace": {
            "$ref": "#/components/schemas/BGStateNamespace"
          },
          "updateTime": {
            "$ref": "#/components/schemas/Date"
          }
        }
      },
      "BGStateNamespace": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        }
      },
      "BgDomain": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "namespaces": {
            "description": "blue green namespaces in the same domain",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BgNamespace"
            }
          },
          "controllerNamespace": {
            "description": "blue green controller namespaces",
            "type": "string"
          },
          "originNamespace": {
            "description": "blue green origin namespaces",
            "type": "string"
          },
          "peerNamespace": {
            "description": "blue green peer namespaces",
            "type": "string"
          }
        }
      },
      "BgNamespace": {
        "type": "object",
        "properties": {
          "namespace": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "version": {
            "type": "string"
          },
          "updateTime": {
            "$ref": "#/components/schemas/Date"
          },
          "bgDomain": {
            "$ref": "#/components/schemas/BgDomain"
          }
        }
      },
      "BgNamespaceRequest": {
        "type": "object",
        "properties": {
          "peerNamespace": {
            "type": "string"
          },
          "originNamespace": {
            "type": "string"
          },
          "controllerNamespace": {
            "type": "string"
          }
        }
      },
      "BgStateRequest": {
        "type": "object",
        "properties": {
          "BGState": {
            "$ref": "#/components/schemas/BGState"
          }
        }
      },
      "ClassifierWithRolesRequest": {
        "required": [
          "classifier",
          "originService"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Database composite identify key. See details in https://perch.qubership.org/display/CLOUDCORE/DbaaS+Database+Classifier",
            "type": "object",
            "additionalProperties": {}
          },
          "originService": {
            "description": "Origin service which send request",
            "type": "string"
          },
          "userRole": {
            "description": "Indicates connection properties with which user role should be returned to a client",
            "type": "string"
          }
        }
      },
      "CompositeStructureDto": {
        "required": [
          "id",
          "namespaces"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "Composite identifier. Usually it\u0027s baseline or origin baseline in blue-green scheme",
            "type": "string"
          },
          "namespaces": {
            "description": "Namespaces that are included in composite structure (baseline and satellites)",
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "Condition": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "reason": {
            "type": "string",
            "nullable": true
          },
          "message": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "ConnectionDescription": {
        "type": "object",
        "properties": {
          "fields": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/FieldDescription"
            }
          }
        }
      },
      "Database": {
        "required": [
          "oldClassifier",
          "classifier",
          "connectionProperties",
          "namespace",
          "type",
          "adapterId",
          "name",
          "resources"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "A unique identifier of the document in the database. This field may not be used when searching by classifier for security purpose. In appears in response when Create database API is executed.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "oldClassifier": {
            "description": "Old classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as dbClassifier, isService, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "classifier": {
            "description": "Classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as dbClassifier, scope, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {},
            "deprecated": true
          },
          "connectionProperties": {
            "description": "The information about connection to database. It contains such keys as url, authDbName, username, password, port, host.Setting keys depends on the database type.",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "namespace": {
            "description": "Namespace where database is placed",
            "type": "string",
            "deprecated": true
          },
          "type": {
            "description": "Type of database, for example postgresql or mongodb",
            "type": "string",
            "deprecated": true
          },
          "adapterId": {
            "description": "This field indicates for which adapter the database was created.",
            "type": "string"
          },
          "name": {
            "description": "Name of database. It may be generated or, if name was specified in a request then it will be specified.",
            "type": "string"
          },
          "markedForDrop": {
            "description": "A marker indicating that the database will be deleted.",
            "type": "boolean"
          },
          "timeDbCreation": {
            "description": "Time to create a database",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Date"
              }
            ]
          },
          "backupDisabled": {
            "description": "This field indicates if backup is disabled or not. If true, database would not be backed up. Example: false",
            "type": "boolean"
          },
          "dbOwnerRoles": {
            "description": "The list of roles which are related to this logical database. The external security service (e.g. DBaaS Agent) can perform a verification process on this field.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "settings": {
            "description": "Additional settings for creating a database",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionDescription": {
            "description": "This parameter describes connection properties.",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/ConnectionDescription"
              }
            ]
          },
          "warnings": {
            "description": "Lists warning messages",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "externallyManageable": {
            "description": "This parameter specifies if a control over the database is not carried out by the DbaaS adapter.",
            "type": "boolean"
          },
          "bgVersion": {
            "description": "Database version. It uses for blue-green",
            "type": "string"
          },
          "physicalDatabaseId": {
            "type": "string"
          },
          "databaseRegistry": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseRegistry"
            }
          },
          "resources": {
            "$ref": "#/components/schemas/DbResource"
          },
          "dbState": {
            "$ref": "#/components/schemas/DbState"
          }
        }
      },
      "DatabaseCreateRequest": {
        "description": "Request model for adding database to DBaaS",
        "required": [
          "classifier",
          "type",
          "dbOwner"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of database and distinguishes this database from other databases in the same namespace. It contains such keys as dbClassifier, isServiceDb, microserviceName, namespace. Setting keys depends on the database type. If database with such classifier exists, then this database will be given away. The backupDisabled parameter can not be modified; it is installed only once during creating database request.",
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "Describes the type of database in which you want to create a database. For example mongodb or postgresql",
            "type": "string"
          },
          "backupDisabled": {
            "description": "This field indicates if backup is disabled or not. If true - database would not be backed up.",
            "type": "boolean"
          },
          "settings": {
            "description": "Additional settings for creating database. There is a possibility to update settings after database creation.",
            "type": "object",
            "additionalProperties": {}
          },
          "physicalDatabaseId": {
            "description": "Specifies the identificator of physical database where a logical database will be created. If it is not specified then logical database will be created in default physical database. You can get the list of all physical databases by \"List registered physical databases\" API.",
            "type": "string"
          },
          "namePrefix": {
            "description": "This is a prefix of the database name. Prefix depends on the type of the database and it should be less than 27 characters if dbName is not specified.",
            "type": "string"
          },
          "dbName": {
            "description": "This is the name of the database. Name should be unique. If a database having this name exists there will be a conflict. If dbName is absent it will be generated",
            "type": "string"
          },
          "username": {
            "description": "It is a username for a user which will be created together with the database. If the username is absent it will be generated.",
            "type": "string"
          },
          "password": {
            "description": "This is password for a user, which will be created together with the database. If password is absent it will be generated",
            "type": "string"
          },
          "initScriptIdentifiers": {
            "description": "The list of identifiers of initial scripts which should be executed in the adapter. Deprecated in v1 and v2, will be removed in v3. For more info visit https://perch.qubership.org/display/CLOUDCORE/How+to+remove+initScriptIdentifiers+parameter",
            "type": "array",
            "items": {
              "type": "string"
            },
            "deprecated": true
          },
          "dbOwnerRoles": {
            "description": "The list of roles which are related to this logical database. The external security service (e.g. DBaaA Agent) can perform a verification process on this field.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "dbOwner": {
            "description": "Database owner name",
            "type": "string"
          }
        }
      },
      "DatabaseCreateRequestV3": {
        "description": "V3 Request model for adding database to DBaaS",
        "required": [
          "type",
          "originService"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "Describes the type of database in which you want to create a database. For example mongodb or postgresql",
            "type": "string"
          },
          "namePrefix": {
            "description": "This is a prefix of the database name. Prefix depends on the type of the database and it should be less than 27 characters if dbName is not specified.",
            "type": "string"
          },
          "backupDisabled": {
            "description": "This field indicates if backup is disabled or not. If true - database would not be backed up.",
            "type": "boolean"
          },
          "settings": {
            "description": "Additional settings for creating database. There is a possibility to update settings after database creation.",
            "type": "object",
            "additionalProperties": {}
          },
          "physicalDatabaseId": {
            "description": "Specifies the identificator of physical database where a logical database will be created. If it is not specified then logical database will be created in default physical database. You can get the list of all physical databases by \"List registered physical databases\" API.",
            "type": "string"
          },
          "originService": {
            "description": "Origin service which send request",
            "type": "string"
          },
          "userRole": {
            "description": "Indicates connection properties with which user role should be returned to a client",
            "type": "string"
          }
        }
      },
      "DatabaseDeclarativeConfig": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "lazy": {
            "type": "boolean"
          },
          "settings": {
            "type": "object",
            "additionalProperties": {}
          },
          "instantiationApproach": {
            "type": "string"
          },
          "versioningApproach": {
            "type": "string"
          },
          "versioningType": {
            "type": "string"
          },
          "classifier": {
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "type": "string"
          },
          "namePrefix": {
            "type": "string"
          },
          "namespace": {
            "type": "string"
          }
        }
      },
      "DatabaseInfo": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          }
        }
      },
      "DatabaseRegistry": {
        "required": [
          "classifier",
          "namespace",
          "type",
          "database"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "A unique identifier of the document in the database. This field may not be used when searching by classifier for security purpose. In appears in response when Create database API is executed.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "timeDbCreation": {
            "description": "Time to create a database",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Date"
              }
            ]
          },
          "classifier": {
            "description": "Classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as dbClassifier, scope, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "namespace": {
            "description": "Namespace where database is placed",
            "type": "string"
          },
          "type": {
            "description": "Type of database, for example postgresql or mongodb",
            "type": "string"
          },
          "database": {
            "$ref": "#/components/schemas/Database"
          },
          "dbState": {
            "$ref": "#/components/schemas/DbState"
          },
          "databaseRegistry": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseRegistry"
            }
          },
          "resources": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbResource"
            }
          },
          "oldClassifier": {
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "adapterId": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "markedForDrop": {
            "type": "boolean"
          },
          "backupDisabled": {
            "type": "boolean"
          },
          "dbOwnerRoles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "settings": {
            "type": "object",
            "additionalProperties": {}
          },
          "connectionDescription": {
            "$ref": "#/components/schemas/ConnectionDescription"
          },
          "warnings": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "externallyManageable": {
            "type": "boolean"
          },
          "bgVersion": {
            "type": "string"
          },
          "physicalDatabaseId": {
            "type": "string"
          }
        }
      },
      "DatabaseResponse": {
        "required": [
          "classifier",
          "connectionProperties",
          "resources",
          "namespace",
          "type",
          "adapterId",
          "name"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "A unique identifier of the document in the database. This field might not be used when searching by classifier for security purpose. And it exists in the response when executing Create database API",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "classifier": {
            "description": "Classifier describes the purpose of the database and it distinguishes this database from other databases in the same namespace. It contains such keys as dbClassifier, isServiceDb, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "description": "This is an information about connection to database. It contains such keys as url, authDbName, username, password, port, host.Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "resources": {
            "$ref": "#/components/schemas/DbResource"
          },
          "namespace": {
            "description": "Namespace where database is placed.",
            "type": "string"
          },
          "type": {
            "description": "Type of database, for example postgresql or mongodb",
            "type": "string"
          },
          "adapterId": {
            "description": "This field indicates for which adapter the database was created.",
            "type": "string"
          },
          "name": {
            "description": "Name of database. It may be generated or, if name was specified in the request, then it will be specified.",
            "type": "string"
          },
          "markedForDrop": {
            "description": "A marker indicating if the database will be deleted.",
            "type": "boolean"
          },
          "timeDbCreation": {
            "description": "Time to create a database.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Date"
              }
            ]
          },
          "backupDisabled": {
            "type": "boolean"
          },
          "settings": {
            "description": "Additional settings for creating a database.",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionDescription": {
            "description": "This parameter describes a connection properties.",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/ConnectionDescription"
              }
            ]
          },
          "warnings": {
            "description": "List of warning messages.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "externallyManageable": {
            "description": "This parameter specifies if a control over the database is not carried out by the DbaaS adapter",
            "type": "boolean"
          },
          "dbOwnerRoles": {
            "description": "The list of roles which are related to this logical database. The external security service (e.g. DBaaA Agent) can perform a verification process on this field.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "classifierV3Migrated": {
            "description": "Indicate that classifier migrated correctly to V3 structure",
            "type": "boolean"
          }
        }
      },
      "DatabaseResponseV3ListCP": {
        "required": [
          "classifier",
          "namespace",
          "type",
          "name",
          "connectionProperties"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "A unique identifier of the document in the database. This field might not be used when searching by classifier for security purpose. And it exists in the response when executing Create database API",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "classifier": {
            "description": "Classifier describes the purpose of the database and it distinguishes this database from other databases in the same namespace. It contains such keys as dbClassifier, isServiceDb, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "namespace": {
            "description": "Namespace where database is placed.",
            "type": "string"
          },
          "type": {
            "description": "Type of database, for example PostgreSQL or MongoDB",
            "type": "string"
          },
          "name": {
            "description": "Name of database. It may be generated or, if name was specified in the request, then it will be specified.",
            "type": "string"
          },
          "externallyManageable": {
            "description": "This parameter specifies if a control over the database is not carried out by the DbaaS adapter",
            "type": "boolean"
          },
          "timeDbCreation": {
            "description": "Time to create a database.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Date"
              }
            ]
          },
          "settings": {
            "description": "Additional settings for creating a database.",
            "type": "object",
            "additionalProperties": {}
          },
          "backupDisabled": {
            "description": "This field indicates if backup is disabled or not. If true, database would not be backed up. Example: false",
            "type": "boolean"
          },
          "physicalDatabaseId": {
            "description": "Physical database identifier where the registered database should be located. If it is absent, adapter id may be used to identify the target physical database.",
            "type": "string"
          },
          "connectionProperties": {
            "description": "This is an information about connection to database. It contains such keys as url, authDbName, username, password, port, host.Setting keys depends on the database type.",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "resources": {
            "$ref": "#/components/schemas/DbResource"
          }
        }
      },
      "DatabaseStateStatus": {
        "enum": [
          "PROCESSING",
          "CREATED",
          "DELETING",
          "DELETING_FAILED",
          "ARCHIVED",
          "ORPHAN"
        ],
        "type": "string"
      },
      "DatabasesBackup": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "status": {
            "description": "This field contains the status of backup process of the specific adapter.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Status1"
              }
            ]
          },
          "adapterId": {
            "description": "This field contains the adapter id.",
            "type": "string"
          },
          "localId": {
            "description": "Identifier of an adapter associated with backup process",
            "type": "string"
          },
          "trackId": {
            "description": "Identifier for polling process specific adapter.",
            "type": "string"
          },
          "trackPath": {
            "description": "Priority path for polling process.",
            "type": "string"
          },
          "databases": {
            "description": "List of databases\u0027 names",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "DatabasesInfo": {
        "type": "object",
        "properties": {
          "global": {
            "$ref": "#/components/schemas/DatabasesInfoSegment"
          },
          "perAdapters": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabasesInfoSegment"
            }
          }
        }
      },
      "DatabasesInfoSegment": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "totalDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseInfo"
            }
          },
          "registration": {
            "$ref": "#/components/schemas/DatabasesRegistrationInfo"
          },
          "deletingDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseInfo"
            }
          }
        }
      },
      "DatabasesRegistrationInfo": {
        "type": "object",
        "properties": {
          "totalDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseInfo"
            }
          },
          "lostDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseInfo"
            }
          },
          "ghostDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseInfo"
            }
          }
        }
      },
      "Date": {
        "format": "date",
        "type": "string",
        "example": "2022-03-10"
      },
      "DbResource": {
        "required": [
          "kind",
          "name"
        ],
        "type": "object",
        "properties": {
          "kind": {
            "description": "The kind of resource. For example database or user",
            "type": "string"
          },
          "name": {
            "description": "Name of the resource.",
            "type": "string"
          }
        }
      },
      "DbState": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "state": {
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/DatabaseStateStatus"
              }
            ],
            "deprecated": true
          },
          "databaseState": {
            "$ref": "#/components/schemas/DatabaseStateStatus"
          },
          "description": {
            "type": "string"
          },
          "podName": {
            "type": "string"
          }
        }
      },
      "DebugDatabaseDeclarativeConfigV3": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "settings": {
            "type": "object",
            "additionalProperties": {}
          },
          "lazy": {
            "type": "boolean"
          },
          "instantiationApproach": {
            "type": "string"
          },
          "versioningApproach": {
            "type": "string"
          },
          "versioningType": {
            "type": "string"
          },
          "classifier": {
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "type": "string"
          },
          "namePrefix": {
            "type": "string"
          },
          "namespace": {
            "type": "string"
          }
        }
      },
      "DebugLogicalDatabaseV3": {
        "type": "object",
        "properties": {
          "namespace": {
            "type": "string"
          },
          "microservice": {
            "type": "string"
          },
          "tenantId": {
            "type": "string"
          },
          "logicalDbName": {
            "type": "string"
          },
          "bgVersion": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "name": {
            "type": "string"
          },
          "physicalDbId": {
            "type": "string"
          },
          "physicalDbAdapterUrl": {
            "type": "string"
          },
          "declaration": {
            "$ref": "#/components/schemas/DebugDatabaseDeclarativeConfigV3"
          }
        }
      },
      "DebugRulesRequest": {
        "description": "Debug rules request allows to validate a list of rules against a list of microservices to check what database is going to be assigned to each microservice",
        "required": [
          "microservices",
          "rules"
        ],
        "type": "object",
        "properties": {
          "microservices": {
            "description": "List of microservices",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "rules": {
            "description": "List of rules",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OnMicroserviceRuleRequest"
            }
          }
        }
      },
      "DeclarativeResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "trackingId": {
            "type": "string",
            "nullable": true
          },
          "conditions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Condition"
            }
          }
        }
      },
      "DeleteOrphansRequest": {
        "required": [
          "namespaces"
        ],
        "type": "object",
        "properties": {
          "namespaces": {
            "description": "List of namespaces orhan databases of which is needed to delete",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "delete": {
            "description": "confirmation parameter. If this is not passed or false then orhan database will not be deleted and response will contain orhan databases that are registered in DbaaS",
            "type": "boolean"
          }
        }
      },
      "DeleteResult": {
        "type": "object",
        "properties": {
          "databasesBackup": {
            "$ref": "#/components/schemas/DatabasesBackup"
          },
          "status": {
            "$ref": "#/components/schemas/Status1"
          },
          "adapterId": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "DumpDefaultRuleV3": {
        "type": "object",
        "properties": {
          "physicalDatabaseId": {
            "type": "string"
          },
          "address": {
            "type": "string"
          }
        }
      },
      "DumpResponseV3": {
        "type": "object",
        "properties": {
          "rules": {
            "$ref": "#/components/schemas/DumpRulesV3"
          },
          "logicalDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Database"
            }
          },
          "physicalDatabases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PhysicalDatabase"
            }
          },
          "declarativeConfigurations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseDeclarativeConfig"
            }
          },
          "blueGreenDomains": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BgDomain"
            }
          }
        }
      },
      "DumpRulesV3": {
        "type": "object",
        "properties": {
          "defaultRules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DumpDefaultRuleV3"
            }
          },
          "namespaceRules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PerNamespaceRule"
            }
          },
          "microserviceRules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PerMicroserviceRule"
            }
          },
          "permanentRules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PerNamespaceRule"
            }
          }
        }
      },
      "ExternalAdapterRegistrationEntry": {
        "type": "object",
        "properties": {
          "adapterId": {
            "type": "string"
          },
          "address": {
            "type": "string"
          },
          "httpBasicCredentials": {
            "$ref": "#/components/schemas/HttpBasicCredentials"
          },
          "supportedVersion": {
            "type": "string"
          },
          "apiVersions": {
            "$ref": "#/components/schemas/ApiVersion"
          }
        }
      },
      "ExternalDatabaseRequestV3": {
        "required": [
          "classifier",
          "connectionProperties",
          "type",
          "dbName"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "See the description of \"classifier\" properties of DatabaseCreateRequest entity",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "description": "There is an information about connection to database. It contains such keys as url, authDbName, port, host. username and password do not need to specify here.You should specify them in order for the client to be able to connect to the database.",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "type": {
            "description": "Type of physical database.",
            "type": "string"
          },
          "dbName": {
            "description": "Name of logical database.",
            "type": "string"
          },
          "updateConnectionProperties": {
            "description": "Is connection properties update required. False by default. If true, then old connection properties will be replaced by the new ones provided.",
            "type": "boolean"
          }
        }
      },
      "FailureRegistrationV3": {
        "description": "Errors during the migration process",
        "required": [
          "id",
          "message"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "Record Id",
            "type": "string"
          },
          "message": {
            "description": "Message about error",
            "type": "string"
          }
        }
      },
      "FieldDescription": {
        "type": "object",
        "properties": {
          "type": {
            "$ref": "#/components/schemas/FieldTypeEnum"
          }
        }
      },
      "FieldTypeEnum": {
        "enum": [
          "PASSWORD"
        ],
        "type": "string"
      },
      "GetOrCreateUserRequest": {
        "required": [
          "classifier",
          "logicalUserId",
          "type"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as scope, microserviceName, namespace.",
            "type": "object",
            "additionalProperties": {}
          },
          "logicalUserId": {
            "description": "User uniq identifier. Using this field with classifier and type dbaas will determine to create or return created before user.",
            "type": "string"
          },
          "type": {
            "description": "The physical type of logical database. For example postgresql",
            "type": "string"
          },
          "physicalDbId": {
            "description": "Identificator of physical database related to a logical database.",
            "type": "string"
          },
          "usernamePrefix": {
            "description": "Prefix for username",
            "type": "string"
          },
          "userRole": {
            "description": "User role, for example admin, rw, ro",
            "type": "string"
          }
        }
      },
      "GetOrCreateUserResponse": {
        "required": [
          "userId",
          "connectionProperties"
        ],
        "type": "object",
        "properties": {
          "userId": {
            "description": "The user identificator.",
            "type": "string"
          },
          "connectionProperties": {
            "description": "The information about connection to database. It contains such keys as url, authDbName, username, password, port, host.Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "GhostDatabasesResponse": {
        "required": [
          "physicalDatabaseId",
          "dbNames"
        ],
        "type": "object",
        "properties": {
          "physicalDatabaseId": {
            "description": "Physical database identificator.",
            "type": "string"
          },
          "dbNames": {
            "description": "Ghost databases names related to adapter with this physical databases id.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "errorMessage": {
            "description": "Error message from adapter.",
            "type": "string"
          }
        }
      },
      "HttpBasicCredentials": {
        "required": [
          "username",
          "password"
        ],
        "type": "object",
        "properties": {
          "username": {
            "description": "Basic authentication username.",
            "type": "string"
          },
          "password": {
            "description": "Basic authentication password.",
            "type": "string"
          }
        }
      },
      "Instruction": {
        "description": "V3 Responce model for starting the migration procedure",
        "required": [
          "id",
          "additionalRoles"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "Current instruction Id",
            "type": "string"
          },
          "additionalRoles": {
            "description": "Сonnection properties properties that require additional roles",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdditionalRoles"
            }
          }
        }
      },
      "InstructionRequestV3": {
        "description": "V3 Request model to continue register new roles",
        "type": "object",
        "properties": {
          "success": {
            "description": "Databases for which roles have been successfully created",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SuccessRegistrationV3"
            }
          },
          "failure": {
            "description": "Errors when creating roles",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/FailureRegistrationV3"
              }
            ]
          }
        }
      },
      "LinkDatabasesRequest": {
        "description": "Request model for linking existing databases to different namespace",
        "required": [
          "serviceNames",
          "targetNamespace"
        ],
        "type": "object",
        "properties": {
          "serviceNames": {
            "description": "The list of microservice names whose databases will be linked to target namespace",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "targetNamespace": {
            "description": "Namespace, to which databases will be linked",
            "type": "string"
          }
        }
      },
      "Metadata": {
        "required": [
          "apiVersion",
          "supportedRoles",
          "features"
        ],
        "type": "object",
        "properties": {
          "apiVersion": {
            "description": "Adapter API version",
            "type": "string"
          },
          "apiVersions": {
            "description": "Adapter API version",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/ApiVersion"
              }
            ]
          },
          "supportedRoles": {
            "description": "list of supported roles",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "features": {
            "description": "Prohibition or permission of features",
            "type": "object",
            "additionalProperties": {
              "type": "boolean"
            }
          },
          "roHost": {
            "description": "Host of RO pod",
            "type": "string"
          }
        }
      },
      "MigrationResult": {
        "type": "object",
        "properties": {
          "migrated": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "migratedDbInfo": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseResponseV3ListCP"
            }
          },
          "conflicted": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "failed": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "failureReasons": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "NamespaceBackup": {
        "required": [
          "id",
          "namespace",
          "databases",
          "databaseRegistries"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "A unique identifier of the backup process. Backup process is associated with this id.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "backups": {
            "description": "List of adapters with backup information.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabasesBackup"
            }
          },
          "failReasons": {
            "description": "List of errors that can occur during backup process.",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "namespace": {
            "description": "This parameter specifies project namespace whose databases are needed to save.",
            "type": "string"
          },
          "databases": {
            "description": "List of backup databases.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Database"
            }
          },
          "databaseRegistries": {
            "description": "List of backup database registers",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseRegistry"
            }
          },
          "restorations": {
            "description": "The object stores a restoring information related to this backup.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NamespaceRestoration"
            }
          },
          "created": {
            "description": "Data of backup process creation.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Date"
              }
            ]
          },
          "status": {
            "description": "Status of backup process. This field may contain: FAIL, ACTIVE, PROCEEDING, RESTORING, INVALIDATED, DELETION_FAILED",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Status"
              }
            ]
          }
        }
      },
      "NamespaceBackupDTO": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "backups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabasesBackup"
            }
          },
          "failReasons": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "namespace": {
            "type": "string"
          },
          "databases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Database"
            }
          },
          "databaseRegistries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DatabaseRegistry"
            }
          },
          "restorations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NamespaceRestoration"
            }
          },
          "created": {
            "$ref": "#/components/schemas/Date"
          },
          "status": {
            "$ref": "#/components/schemas/Status"
          }
        }
      },
      "NamespaceBackupDeletion": {
        "type": "object",
        "properties": {
          "deleteResults": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DeleteResult"
            }
          },
          "failReasons": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "$ref": "#/components/schemas/Status1"
          }
        }
      },
      "NamespaceRestoration": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "restoreResults": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RestoreResult"
            }
          },
          "failReasons": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "$ref": "#/components/schemas/Status1"
          }
        }
      },
      "NotRecreated": {
        "required": [
          "type",
          "classifier",
          "error"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "Requested physical type of logical database. For example mongodb or postgresql",
            "type": "string"
          },
          "classifier": {
            "description": "Requested classifier",
            "type": "object",
            "additionalProperties": {}
          },
          "error": {
            "description": "Contains a message of error that occurred during recreating",
            "type": "string"
          }
        }
      },
      "OnMicroserviceRuleRequest": {
        "description": "Rule registration request allows to add a new rule for the specific type of logical databases, which would be applied in specific order.",
        "required": [
          "type",
          "microservices"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "Type of physical database which logical base belongs to",
            "type": "string"
          },
          "rules": {
            "description": "List of rules to microservices. Allows to define physical database",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RuleOnMicroservice"
            }
          },
          "microservices": {
            "description": "List of microservice names to which the specified rule has a place to be",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "OperationDetails": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskDetails"
            }
          }
        }
      },
      "OperationState": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "OperationStatusExtendedResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "readOnly": true
          },
          "message": {
            "type": "string"
          },
          "operationDetails": {
            "$ref": "#/components/schemas/OperationDetails"
          }
        }
      },
      "OverallStatusResponse": {
        "type": "object",
        "properties": {
          "overallHealthStatus": {
            "description": "Overall health status",
            "type": "string"
          },
          "overallLogicalDbNumber": {
            "format": "int32",
            "description": "Number of logical databases",
            "type": "integer"
          },
          "physicalDatabaseInfoList": {
            "description": "Information about physical databases",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PhysicalDatabaseInfo"
            }
          }
        }
      },
      "PasswordChangeRequestV3": {
        "required": [
          "type"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Composite database identifier.",
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "Database type.",
            "type": "string"
          },
          "userRole": {
            "description": "Indicates which grants should have user in connection properties",
            "type": "string"
          }
        }
      },
      "PasswordChangeResponse": {
        "type": "object",
        "properties": {
          "changed": {
            "description": "List containing \"classifier:connection\" information with which the password was changed successfully.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PasswordChanged"
            }
          },
          "failed": {
            "description": "List containing fail information.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PasswordFailed"
            }
          }
        }
      },
      "PasswordChanged": {
        "required": [
          "classifier",
          "connection"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Database composite identify key.",
            "type": "object",
            "additionalProperties": {}
          },
          "connection": {
            "description": "New database connection.",
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "PasswordFailed": {
        "required": [
          "classifier",
          "message"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Database composite identify key.",
            "type": "object",
            "additionalProperties": {}
          },
          "message": {
            "description": "Error message.",
            "type": "string"
          }
        }
      },
      "PerMicroserviceRule": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "namespace": {
            "type": "string"
          },
          "microservice": {
            "type": "string"
          },
          "rules": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RuleOnMicroservice"
            }
          },
          "type": {
            "type": "string"
          },
          "createDate": {
            "$ref": "#/components/schemas/Date"
          },
          "updateDate": {
            "$ref": "#/components/schemas/Date"
          },
          "generation": {
            "format": "int32",
            "type": "integer"
          }
        }
      },
      "PerNamespaceRule": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "order": {
            "format": "int64",
            "type": "integer"
          },
          "databaseType": {
            "type": "string"
          },
          "namespace": {
            "type": "string"
          },
          "physicalDatabaseIdentifier": {
            "type": "string"
          },
          "ruleType": {
            "$ref": "#/components/schemas/RuleType1"
          }
        }
      },
      "PermanentPerNamespaceRuleDTO": {
        "description": "Rule allows to define in which physical database new logical databases should be created",
        "required": [
          "dbType",
          "physicalDatabaseId",
          "namespaces"
        ],
        "type": "object",
        "properties": {
          "dbType": {
            "description": "Physical db type (ex. postgresql, mongodb, etc), for which rule should be applied.",
            "type": "string"
          },
          "physicalDatabaseId": {
            "description": "Identifier of physical database where newly created logical databases should be placed.",
            "type": "string"
          },
          "namespaces": {
            "description": "Namespaces for which rules should be applied",
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PermanentPerNamespaceRuleDeleteDTO": {
        "required": [
          "namespaces"
        ],
        "type": "object",
        "properties": {
          "dbType": {
            "description": "Db type for which rules should be deleted. If omitted all rules for specified namespaces will be deleted.",
            "type": "string"
          },
          "namespaces": {
            "description": "Namespaces for which rules should be deleted",
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PhysicalDatabase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "physicalDatabaseIdentifier": {
            "type": "string"
          },
          "global": {
            "type": "boolean"
          },
          "labels": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "type": {
            "type": "string"
          },
          "registrationDate": {
            "$ref": "#/components/schemas/Date"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "features": {
            "type": "object",
            "additionalProperties": {
              "type": "boolean"
            }
          },
          "roHost": {
            "type": "string"
          },
          "identified": {
            "type": "boolean"
          },
          "adapter": {
            "$ref": "#/components/schemas/ExternalAdapterRegistrationEntry"
          }
        }
      },
      "PhysicalDatabaseInfo": {
        "type": "object",
        "properties": {
          "physicalDatabaseId": {
            "description": "Physical database identifier",
            "type": "string"
          },
          "healthStatus": {
            "description": "Adapter health status",
            "type": "string"
          },
          "logicalDbNumber": {
            "description": "Number of logical databases related to this physical database",
            "type": "string"
          }
        }
      },
      "PhysicalDatabaseRegistrationResponseDTOV3": {
        "required": [
          "type",
          "adapterId",
          "adapterAddress",
          "global",
          "labels",
          "supports"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "Adapter type.",
            "type": "string"
          },
          "adapterId": {
            "description": "Adapter identifier.",
            "type": "string"
          },
          "adapterAddress": {
            "description": "Adapter address.",
            "type": "string"
          },
          "global": {
            "description": "If physical database is global, it is used as a default for its database type.",
            "type": "boolean"
          },
          "labels": {
            "description": "Additional information that has been sent during physical database registration.",
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "supports": {
            "description": "Information about features this adapter supports.",
            "type": "object",
            "additionalProperties": {
              "type": "boolean"
            }
          },
          "supportedVersion": {
            "type": "string"
          },
          "supportedRoles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PhysicalDatabaseRegistryRequestV3": {
        "description": "V3 Request model for sending physical database registration to DBaaS",
        "required": [
          "adapterAddress",
          "httpBasicCredentials",
          "metadata",
          "status"
        ],
        "type": "object",
        "properties": {
          "adapterAddress": {
            "description": "Physical address of DbaaS adapter. The address is used for CRUD operation with logic databases.",
            "type": "string"
          },
          "httpBasicCredentials": {
            "description": "Basic authentication username and password for requests from DbaaS Aggregator to DbaaS adapter.",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/HttpBasicCredentials"
              }
            ]
          },
          "labels": {
            "description": "Additional information about physical database. It may be a version of database cluster, any labels, and etc.",
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "metadata": {
            "description": "Information about supported roles, adapter api version and features",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/Metadata"
              }
            ]
          },
          "status": {
            "description": "Adapter status: running or run",
            "type": "string"
          }
        }
      },
      "PolicyRole": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "defaultRole": {
            "type": "string"
          },
          "additionalRole": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "RecreateDatabaseRequest": {
        "description": "Request model for recreate existing database. The database will have the same settings and classifier as original",
        "required": [
          "type",
          "classifier",
          "physicalDatabaseId"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "The physical type of logical database. For example mongodb or postgresql",
            "type": "string"
          },
          "classifier": {
            "description": "The unique key of existing database. The list of all created databases in a specific namespace can be found by by \u0027List of all databases\u0027 API.",
            "type": "object",
            "additionalProperties": {}
          },
          "physicalDatabaseId": {
            "description": "Specifies the identificator of physical database where a logical database will be recreated. You can get the list of all physical databases by \"List registered physical databases\" API.",
            "type": "string"
          }
        }
      },
      "RecreateDatabaseResponse": {
        "description": "Response model for recreate existing database API. The model contains successful and unsuccessful databases",
        "type": "object",
        "properties": {
          "successfully": {
            "description": "The list contains successfully recreated databases.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Recreated"
            }
          },
          "unsuccessfully": {
            "description": "The list contains requests from which an error occurred during recreating. For these requests databases were not recreated.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NotRecreated"
            }
          }
        }
      },
      "Recreated": {
        "required": [
          "classifier",
          "type",
          "newDb"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Requested classifier",
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "Requested physical type of logical database. For example mongodb or postgresql",
            "type": "string"
          },
          "newDb": {
            "description": "A recreated logical database. This database has the same classifier as a original but connection properties are different (url, dbname, username, password)",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/DatabaseResponse"
              }
            ]
          }
        }
      },
      "RegisterDatabaseRequest": {
        "description": "Request to add database to registration",
        "required": [
          "classifier",
          "connectionProperties",
          "resources",
          "namespace",
          "type",
          "name"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of database, it should not exist in registration, or the request would be ignored.",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "description": "Connection properties used to connect to database. It contains such keys as url, authDbName, username, password, port, host. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "resources": {
            "description": "List of the resources needed to drop during database drop.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbResource"
            }
          },
          "namespace": {
            "description": "Namespace where database is placed.",
            "type": "string"
          },
          "type": {
            "description": "The type of database, for example postgresql or mongodb.",
            "type": "string"
          },
          "adapterId": {
            "description": "Identifier of an adapter to work with database. If not specified then the default would be used.",
            "type": "string"
          },
          "name": {
            "description": "Name of database.",
            "type": "string"
          },
          "backupDisabled": {
            "description": "This parameter specifies if the DbaaS should except this database from backup/restore procedure. The parameter cannot be modified and it is installed only once during registration request.",
            "type": "boolean"
          },
          "physicalDatabaseId": {
            "description": "Physical database identifier where the registered database should be located. If it is absent, adapter id may be used to identify the target physical database.",
            "type": "string"
          }
        }
      },
      "RegisterDatabaseRequestV3": {
        "description": "Request to add database to registration",
        "required": [
          "classifier",
          "connectionProperties",
          "resources",
          "namespace",
          "type",
          "name"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of database, it should not exist in registration, or the request would be ignored.",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "description": "Connection properties used to connect to database. It contains such keys as url, authDbName, username, password, port, host. Setting keys depends on the database type.",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "resources": {
            "description": "List of the resources needed to drop during database drop.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbResource"
            }
          },
          "namespace": {
            "description": "Namespace where database is placed.",
            "type": "string"
          },
          "type": {
            "description": "The type of database, for example postgresql or mongodb.",
            "type": "string"
          },
          "adapterId": {
            "description": "Identifier of an adapter to work with database. If not specified then the default would be used.",
            "type": "string"
          },
          "name": {
            "description": "Name of database.",
            "type": "string"
          },
          "backupDisabled": {
            "description": "This parameter specifies if the DbaaS should except this database from backup/restore procedure. The parameter cannot be modified and it is installed only once during registration request.",
            "type": "boolean"
          },
          "physicalDatabaseId": {
            "description": "Physical database identifier where the registered database should be located. If it is absent, adapter id may be used to identify the target physical database.",
            "type": "string"
          },
          "dbHost": {
            "description": "Physical database host where the registered database is located. Must be in format: \u003cservice-name\u003e.\u003cnamespace\u003e, e.g.: pg-patroni.postgresql-core",
            "type": "string"
          }
        }
      },
      "RegisterDatabaseWithUserCreationRequest": {
        "description": "Request to add database to registration",
        "required": [
          "classifier",
          "type",
          "name"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of database, it should not exist in registration, or the request would be ignored.",
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "The type of database, for example postgresql or mongodb.",
            "type": "string"
          },
          "name": {
            "description": "Name of database.",
            "type": "string"
          },
          "backupDisabled": {
            "description": "This parameter specifies if the DbaaS should except this database from backup/restore procedure. The parameter cannot be modified and it is installed only once during registration request.",
            "type": "boolean"
          },
          "physicalDatabaseId": {
            "description": "Physical database identifier where the registered database should be located. If it is absent, adapter id may be used to identify the target physical database.",
            "type": "string"
          },
          "dbHost": {
            "description": "Physical database host where the registered database is located. Must be in format: \u003cservice-name\u003e.\u003cnamespace\u003e, e.g.: pg-patroni.postgresql-core",
            "type": "string"
          }
        }
      },
      "RegisteredPhysicalDatabasesDTO": {
        "type": "object",
        "properties": {
          "identified": {
            "description": "List of registered physical databases with with a known identifier",
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/PhysicalDatabaseRegistrationResponseDTOV3"
            }
          }
        }
      },
      "RestorePasswordRequest": {
        "description": "Request to start passwords restoration",
        "required": [
          "physicalDbId",
          "type"
        ],
        "type": "object",
        "properties": {
          "physicalDbId": {
            "description": "Id of physical database where is needed to restore passwords",
            "type": "string"
          },
          "type": {
            "description": "Type of physical database where is needed to restore passwords (ex. opensearch)",
            "type": "string"
          },
          "settings": {
            "description": "Field with additional information for adapter",
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "RestoreResult": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "databasesBackup": {
            "description": "This object contains information about restoring the specific adapter.",
            "type": "object",
            "allOf": [
              {
                "$ref": "#/components/schemas/DatabasesBackup"
              }
            ]
          },
          "status": {
            "description": "The field contains the restore status of specific adapter.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/Status1"
              }
            ]
          },
          "adapterId": {
            "type": "string"
          },
          "changedNameDb": {
            "description": "This associative array contain database names, where key: \"old db name\", value: \"new db name\". This array will not be empty if the targetNamespace parameter will be passed and it will be filled during restore to another namespace.",
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        }
      },
      "RestoreUsersRequest": {
        "required": [
          "classifier",
          "type"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as scope, microserviceName, namespace.",
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "description": "The physical type of logical database. For example postgresql",
            "type": "string"
          },
          "role": {
            "description": "User role",
            "type": "string"
          }
        }
      },
      "RestoreUsersResponse": {
        "type": "object",
        "properties": {
          "unsuccessfully": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UnsuccessfulRestore"
            }
          },
          "successfully": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SuccessfullRestore"
            }
          }
        }
      },
      "RuleBody": {
        "description": "Rule allows to define physical database for new logical databases",
        "required": [
          "type",
          "config"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "Type of rule is required, it defines what logic would be used when rule is applying.",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/RuleType"
              }
            ]
          },
          "config": {
            "description": "Configuration contains rule-specific information: \n - perNamespace rule only expects phydbid (physical database identifier) to be specified in rule.",
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "RuleOnMicroservice": {
        "description": "Rule allows to define physical database for new logical databases on microservice",
        "required": [
          "label"
        ],
        "type": "object",
        "properties": {
          "label": {
            "description": "Label uses to find physical DB which contains this label",
            "type": "string"
          }
        }
      },
      "RuleRegistrationRequest": {
        "description": "Rule registration request allows to add a new rule for the specific type of logical databases, which would be applied in specific order.",
        "required": [
          "type"
        ],
        "type": "object",
        "properties": {
          "order": {
            "format": "int64",
            "description": "Inside namespace+type domain, order defines which rule would be used first. Thelesser order takes precedence. The order is optional; if not specified then the maximum over namespace+type domain would be calculated.",
            "type": "integer"
          },
          "type": {
            "description": "Type of database required. The rule would only work on logical databases of the specified type.",
            "type": "string"
          },
          "rule": {
            "$ref": "#/components/schemas/RuleBody"
          }
        }
      },
      "RuleType": {
        "description": "Rule type specified what configuration applies to which logic. \n - perNamespace rule would just use specified physical database for any new logical database in namespace, where rule works",
        "enum": [
          "perNamespace"
        ],
        "type": "string"
      },
      "RuleType1": {
        "enum": [
          "NAMESPACE",
          "PERMANENT"
        ],
        "type": "string"
      },
      "ServiceRole": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "Source": {
        "description": "Represents the particular part of the request which led to the validation error",
        "type": "object",
        "properties": {
          "pointer": {
            "description": "JSON path to the part of the request which led to the error",
            "type": "string"
          },
          "parameter": {
            "description": "Request parameter which led to the error",
            "type": "string"
          },
          "pathVariable": {
            "description": "URI path variable name which led to the error",
            "type": "string"
          }
        }
      },
      "Spec": {
        "type": "object",
        "properties": {
          "specRootUrl": {
            "description": "The root URL part for that API version",
            "type": "string"
          },
          "major": {
            "format": "int32",
            "description": "The last adapter API major version",
            "type": "integer"
          },
          "minor": {
            "format": "int32",
            "description": "The last adapter API minor version",
            "type": "integer"
          },
          "supportedMajors": {
            "description": "Contains a list of supported adapter API major versions",
            "type": "array",
            "items": {
              "format": "int32",
              "type": "integer"
            }
          }
        }
      },
      "Status": {
        "enum": [
          "FAIL",
          "ACTIVE",
          "PROCEEDING",
          "RESTORING",
          "INVALIDATED",
          "DELETION_FAILED"
        ],
        "type": "string"
      },
      "Status1": {
        "enum": [
          "SUCCESS",
          "PROCEEDING",
          "FAIL"
        ],
        "type": "string"
      },
      "SuccessRegistrationV3": {
        "description": "V3 Request model for registration new physical databases roles ",
        "required": [
          "id",
          "connectionProperties",
          "resources"
        ],
        "type": "object",
        "properties": {
          "id": {
            "description": "Record Id",
            "type": "string",
            "allOf": [
              {
                "$ref": "#/components/schemas/UUID"
              }
            ]
          },
          "connectionProperties": {
            "description": "Additional roles",
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          },
          "resources": {
            "description": "Resources",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbResource"
            }
          }
        }
      },
      "SuccessfulRestoreUsersResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "SuccessfullRestore": {
        "type": "object",
        "properties": {
          "connectionProperties": {
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "TaskDetails": {
        "type": "object",
        "properties": {
          "taskId": {
            "type": "string"
          },
          "taskName": {
            "type": "string"
          },
          "state": {
            "$ref": "#/components/schemas/OperationState"
          },
          "classifier": {
            "type": "object",
            "additionalProperties": {}
          },
          "type": {
            "type": "string"
          },
          "backupId": {
            "type": "string"
          },
          "restoreId": {
            "type": "string"
          }
        }
      },
      "UUID": {
        "format": "uuid",
        "pattern": "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
        "type": "string"
      },
      "UnsuccessfulRestore": {
        "type": "object",
        "properties": {
          "connectionProperties": {
            "type": "object",
            "additionalProperties": {}
          },
          "errorMessage": {
            "type": "string"
          }
        }
      },
      "UpdateClassifierRequestV3": {
        "description": "Contains primary or source (\"from\") classifier by which a database record will be found and changed to target classifier (\"from\")",
        "required": [
          "from",
          "to"
        ],
        "type": "object",
        "properties": {
          "from": {
            "description": "Primary or source classifier.",
            "type": "object",
            "additionalProperties": {}
          },
          "to": {
            "description": "Target classifier.",
            "type": "object",
            "additionalProperties": {}
          },
          "fromV1orV2ToV3": {
            "description": "Target classifier.",
            "type": "boolean",
            "example": false
          },
          "clone": {
            "description": "Create copy of record database in dbaas.",
            "type": "boolean",
            "example": false
          }
        }
      },
      "UpdateConnectionPropertiesRequest": {
        "description": "Contains classifier by which a database record for updating connection properties will be found and new connection properties",
        "required": [
          "classifier",
          "connectionProperties"
        ],
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Database classifier.",
            "type": "object",
            "additionalProperties": {}
          },
          "connectionProperties": {
            "description": "New connection properties. Structure of connection properties for different db types may be found at https://perch.qubership.org/pages/viewpage.action?spaceKey\u003dCLOUDCORE\u0026title\u003dDbaaS+Adapters",
            "type": "object",
            "additionalProperties": {}
          },
          "physicalDatabaseId": {
            "description": "Specifies the new identification of physical database where a logical database is already located. You have to pass this parameter if your goal is to update and specify a new physical database.It is an optional parameter and if not specified then physical database will not change. FYI: You can get the list of all physical databases by \"List registered physical databases\" API.",
            "type": "string"
          },
          "resources": {
            "$ref": "#/components/schemas/DbResource"
          },
          "dbName": {
            "description": "Name of database.",
            "type": "string"
          }
        }
      },
      "UpdateHostRequest": {
        "description": "Request object containing the necessary information to update the physical host in a logical database",
        "required": [
          "type",
          "classifier",
          "physicalDatabaseHost",
          "physicalDatabaseId"
        ],
        "type": "object",
        "properties": {
          "type": {
            "description": "The physical type of logical database. For example mongodb or postgresql",
            "type": "string"
          },
          "classifier": {
            "description": "The unique key of existing database. ",
            "type": "object",
            "additionalProperties": {}
          },
          "makeCopy": {
            "description": "If true, a copy of the logical database registry will be created before applying changes. If false, changes will be made directly to the existing registry.",
            "default": true,
            "type": "boolean"
          },
          "physicalDatabaseHost": {
            "description": "Contains physical database host on which it\u0027s needed to change. The host must follow the format: \u003cphysical database k8s service\u003e.\u003cphysical database namespace\u003e. Example: pg-patroni.core-postgresql.",
            "type": "string"
          },
          "physicalDatabaseId": {
            "description": "Specifies id of new physical database. The value can be found in dbaas-adapter env",
            "type": "string"
          }
        }
      },
      "UpdateSettingsAdapterRequest": {
        "description": "Contains current and new settings",
        "required": [
          "currentSettings",
          "newSettings"
        ],
        "type": "object",
        "properties": {
          "currentSettings": {
            "description": "All current database settings already applied to the target database.",
            "type": "object",
            "additionalProperties": {}
          },
          "newSettings": {
            "description": "New version of all database settings to apply to the database. Must consist of all settings the target database must incorporate after this update request will be executed.",
            "type": "object",
            "additionalProperties": {}
          }
        }
      },
      "UserOperationRequest": {
        "type": "object",
        "properties": {
          "classifier": {
            "description": "Classifier describes the purpose of the database and distinguishes this database from other database in the same namespase. It contains such keys as dbClassifier, scope, microserviceName, namespace. Setting keys depends on the database type.",
            "type": "object",
            "additionalProperties": {}
          },
          "logicalUserId": {
            "description": "User uniq identifier. Using this field with classifier and type dbaas will determine to create or return created before user.",
            "type": "string"
          },
          "type": {
            "description": "The physical type of logical database. For example mongodb or postgresql",
            "type": "string"
          },
          "userId": {
            "description": "The user identificator.",
            "type": "string"
          }
        }
      },
      "ValidateRulesResponse": {
        "required": [
          "mapLabelToPhysicalDb",
          "defaultPhysicalDatabases"
        ],
        "type": "object",
        "properties": {
          "mapLabelToPhysicalDb": {
            "description": "Map with pairs of \u0027label : corresponding physical database\u0027.",
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "defaultPhysicalDatabases": {
            "description": "Default physical databases for each registered type.",
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        }
      }
    }
  }
}
